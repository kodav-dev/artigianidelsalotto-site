---
import "../styles/global.css";
import Navigation from "@/components/Navigation.astro";
import Footer from "@/components/Footer.astro";
import SEO from "@/components/SEO.astro";
import CookieBanner from "@/components/CookieBanner.astro";
import { getLocalizedPath } from "@/i18n/utils";

import type { ImageMetadata } from "astro";

interface Props {
	title: string;
	description: string;
	lang?: "it" | "en";
	image?: string | ImageMetadata;
	publishedTime?: string;
	modifiedTime?: string;
	author?: string;
	tags?: string[];
	itPath?: string;
	enPath?: string;
}

const {
	title,
	description,
	lang = "it",
	image,
	publishedTime,
	modifiedTime,
	author,
	tags,
	itPath,
	enPath,
} = Astro.props;
const seoImage = typeof image === "object" ? image.src : image;

---

<!doctype html>
<html lang={lang}>
	<head>
		<meta charset="utf-8" />
		<SEO
			title={title}
			description={description}
			image={seoImage}
			article={{
				publishedTime,
				modifiedTime,
				author,
				tags,
			}}
		/>

		<!-- Additional SEO meta tags for blog posts -->
		{
			tags && tags.length > 0 && (
				<meta name="keywords" content={tags.join(", ")} />
			)
		}
		{author && <meta name="author" content={author} />}
		<meta
			name="robots"
			content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
		/>
	</head>

	<body
		class="bg-[#fafaf5] text-slate-900 overflow-x-hidden transition-colors duration-200"
	>
		<!-- Background gradient -->
		<div class="fixed inset-0 -z-10">
			<div
				class="absolute inset-0 bg-linear-to-br from-[#f3f4f1] via-white to-[#f9faf6]"
			>
			</div>
			<div
				class="absolute top-0 left-1/4 w-96 h-96 bg-[#8b947e]/5 rounded-full blur-3xl"
			>
			</div>
			<div
				class="absolute bottom-0 right-1/4 w-96 h-96 bg-[#525d4a]/5 rounded-full blur-3xl"
			>
			</div>
		</div>

		<Navigation
			currentPath={Astro.url.pathname}
			lang={lang}
			itPath={itPath}
			enPath={enPath}
		/>

		<slot />

		<Footer lang={lang} />
		<CookieBanner siteId="lacortedilaura" />
	</body>
</html>
