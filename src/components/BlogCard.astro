---
import { Image } from "astro:assets";
import { getLocalizedPath } from "@/i18n/utils";

interface Props {
	title: string;
	description: string;
	pubDate: Date;
	image?: any;
	slug: string;
	tags?: string[];
	lang: "it" | "en";
}

const { title, description, pubDate, image, slug, tags, lang } = Astro.props;

const formattedDate = new Intl.DateTimeFormat(
	lang === "it" ? "it-IT" : "en-US",
	{
		year: "numeric",
		month: "long",
		day: "numeric",
	},
).format(pubDate);
---

<a
	href={getLocalizedPath(`/blog-di-laura/${slug}`, lang)}
	class="group flex flex-col bg-white border border-slate-200 overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300"
>
	{
		image && (
			<div class="aspect-video overflow-hidden">
				<Image
					src={image}
					alt={title}
					class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
				/>
			</div>
		)
	}
	<div class="p-6 flex-1 flex flex-col">
		<div class="flex items-center gap-3 mb-4">
			<time
				datetime={pubDate.toISOString()}
				class="text-xs font-bold uppercase tracking-widest text-[#8b947e]"
			>
				{formattedDate}
			</time>
			{
				tags && tags.length > 0 && (
					<span class="text-[10px] font-black uppercase tracking-tighter px-2 py-0.5 bg-[#525d4a]/10 text-[#525d4a]">
						{tags[0]}
					</span>
				)
			}
		</div>
		<h3 class="text-xl font-bold mb-3 group-hover:text-[#8b947e] transition-colors leading-tight">
			{title}
		</h3>
		<p class="text-slate-600 text-sm line-clamp-2 mb-6 flex-1">
			{description}
		</p>
		<div class="flex items-center gap-2 text-xs font-black uppercase tracking-widest text-[#525d4a]">
			{lang === "it" ? "Leggi di pi√π" : "Read more"}
			<svg
				class="w-3 h-3 group-hover:translate-x-1 transition-transform"
				fill="none"
				stroke="currentColor"
				viewBox="0 0 24 24"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="3"
					d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
			</svg>
		</div>
	</div>
</a>
