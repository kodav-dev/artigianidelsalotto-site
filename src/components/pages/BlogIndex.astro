---
import BaseLayout from "@/layouts/BaseLayout.astro";
import BlogCard from "@/components/BlogCard.astro";
import { useTranslations, getLocalizedPath } from "@/i18n/utils";
import { Image } from "astro:assets";
import blogHero from "@/assets/blog/hero.webp";

interface Props {
	posts: any[];
	lang: "it" | "en";
}

const { posts, lang } = Astro.props;
const t = useTranslations(lang);

const sortedPosts = posts.sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout
	title={t("blog.seo.title")}
	description={t("blog.seo.description")}
	currentPath={getLocalizedPath("/blog-di-laura", lang)}
	lang={lang}
	heroImage={blogHero}
	H1_main={t("blog.H1_main")}
	H1_highlight={t("blog.H1_highlight")}
>
	<main class="container mx-auto px-6 py-24">
		<section class="container mx-auto px-6 text-center mb-24">
			<h2 class="text-4xl font-bold mb-6">{t("blog.title")}</h2>
			<p class="text-lg text-slate-600">{t("blog.subtitle")}</p>
		</section>

		<div class="max-w-6xl mx-auto">
			{
				sortedPosts.length > 0 ? (
					<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
						{sortedPosts.map((post) => (
							<BlogCard
								title={post.data.title}
								description={post.data.description}
								pubDate={post.data.pubDate}
								image={post.data.image}
								slug={post.slug.split("/").pop() || post.slug}
								tags={post.data.tags}
								lang={lang}
							/>
						))}
					</div>
				) : (
					<div class="text-center py-20 text-slate-500 italic">
						{lang === "it"
							? "Nessun articolo trovato."
							: "No articles found."}
					</div>
				)
			}
		</div>
	</main>
</BaseLayout>
