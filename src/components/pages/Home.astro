---
import "../../styles/global.css";
import Navigation from "@/components/Navigation.astro";
import Footer from "@/components/Footer.astro";
import SEO from "@/components/SEO.astro";
import CookieBanner from "@/components/CookieBanner.astro";
import GTM from "@/components/GTM.astro";
import GTMNoScript from "@/components/GTMNoScript.astro";
import { Image } from "astro:assets";
import {
	getLangFromUrl,
	useTranslations,
	getLocalizedPath,
} from "@/i18n/utils";

// Images
import homeHero from "@/assets/home/hero.webp";
import Gallery from "@/components/Gallery.astro";
import MenuHome from "@/components/MenuHome.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentPath = getLocalizedPath("/", lang);
---

<!doctype html>
<html lang={lang}>
	<head>
		<meta charset="utf-8" />
		<link rel="dns-prefetch" href="https://cookiebanner.marf.cloud" />
		<link rel="preconnect" href="https://cookiebanner.marf.cloud" />
		<link rel="dns-prefetch" href="https://www.googletagmanager.com" />
		<link rel="preconnect" href="https://www.googletagmanager.com" />
		<GTM />
		<SEO
			title={t("home.seo.title")}
			description={t("home.seo.description")}
		/>
	</head>

	<body
		class="bg-white text-slate-900 overflow-x-hidden transition-colors duration-200"
	>
		<GTMNoScript />

		<Navigation currentPath={currentPath} />

		<!-- Hero con CTA -->
		<section class="relative w-full h-[460px] overflow-hidden bg-black">
			<Image
				src={homeHero}
				alt={t("home.seo.title")}
				class="w-full h-full object-cover object-center"
				loading="eager"
				fetchpriority="high"
				widths={[640, 750, 1024, 1400]}
				sizes="(max-width: 640px) 100vw, (max-width: 1024px) 100vw, 1400px"
			/>
			<div class="absolute inset-0 bg-black/5"></div>

			<div
				class="absolute inset-0 flex flex-col items-center justify-center text-center px-6 gap-6"
			>
				<h1 class="flex flex-col items-center gap-2">
					<span
						class="text-xl md:text-3xl lg:text-4xl tracking-widest text-white/90 uppercase font-bold md:mb-6"
					>
						{t("home.H1_top")}
					</span>
					<span
						class="text-xl md:text-2xl lg:text-5xl tracking-tighter text-white font-adelia font-thin"
					>
						{t("home.H1_main")} <span class="text-[#d9b130]">{t("home.H1_highlight")}</span>
					</span>
				</h1>

				<!-- CTA Prenotazione nella Hero -->
				<a
					href="#booking-form"
					class="inline-block border-1 border-white hover:bg-white hover:text-black text-white font-bold py-4 px-8 transition-all shadow-lg hover:shadow-xl active:scale-[0.98] text-lg mt-4 rounded-md"
				>
					{t("footer.bookTableCTA")}
				</a>
			</div>
		</section>

		<main class="pt-24">
			<!-- Incipit -->
			<section class="container mx-auto px-6 text-center mb-24">
				<h2 class="text-4xl font-bold mb-6">{t("home.title")}</h2>
				<p
					class="text-lg text-slate-600 dark:text-white/75 max-w-6xl mx-auto"
				>
					{t("home.description")}
				</p>
			</section>

			<Gallery lang={lang} />

			<MenuHome lang={lang} />

			<!-- Closure -->
			<section class="container mx-auto p-6 text-center">
				<h4 class="text-4xl font-bold">{t("home.closureTitle")}</h4>
			</section>
		</main>

		<Footer />

		<CookieBanner siteId="lacortedilaura" />
	</body>
</html>
