---
import { Image } from "astro:assets";
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import { translations } from "@/i18n/translations";

interface Props {
    category: string;
    image: any;
    writtenImage: any;
    bgColor?: string;
    textColor?: string;
    descColor?: string;
    imagePosition?: "left" | "right";
}

const {
    category,
    image,
    writtenImage,
    bgColor = "bg-white",
    textColor = "text-slate-900",
    descColor = "text-slate-600",
    imagePosition = "left",
} = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Get all items and filter by category
const menuItems = Object.values(translations[lang].home.menu.items).filter(
    (item: any) => item.category === category,
);
---

<section class={`${bgColor} w-full py-12 sm:py-16 overflow-hidden`}>
    <div
        class={`max-w-6xl mx-auto px-4 sm:px-6 flex flex-col items-center gap-8 sm:gap-12 lg:gap-20 ${imagePosition === "right" ? "md:flex-row-reverse" : "md:flex-row"}`}
    >
        <!-- Left: Dish Image -->
        <div class="w-full md:w-1/2 flex justify-center lg:justify-end">
            <div
                class="relative w-full max-w-[280px] sm:max-w-[300px] lg:max-w-[450px] aspect-square overflow-hidden"
            >
                <Image
                    src={image}
                    alt={category}
                    class="w-full h-full object-cover"
                    widths={[280, 300, 450, 600]}
                    sizes="(max-width: 639px) 280px, (max-width: 1023px) 300px, 450px"
                />
            </div>
        </div>

        <!-- Right: Menu Content -->
        <div
            class="w-full md:w-1/2 flex flex-col items-start text-left"
        >
            <!-- Category Script Title -->
            <div class="text-2xl md:text-5xl text-black font-adelia mb-15 w-full text-center md:text-left">
                {category}
            </div>

            <!-- Dish List -->
            <div class="space-y-6 sm:space-y-10 w-full max-w-md px-4 sm:px-0">
                {
                    menuItems.map((item: any) => (
                        <div class="group">
                            <div class="flex justify-between items-baseline gap-3 sm:gap-4 mb-1">
                                <h2
                                    class={`text-base sm:text-lg font-bold ${textColor} tracking-tight group-hover:text-yellow-site transition-colors`}
                                >
                                    {item.name}
                                </h2>
                                <span
                                    class={`text-sm sm:text-md font-black ${textColor} whitespace-nowrap`}
                                >
                                    {item.price}
                                </span>
                            </div>
                            {item.description && (
                                <p
                                    class={`text-sm sm:text-base leading-relaxed font-medium italic ${descColor}`}
                                >
                                    {item.description}
                                </p>
                            )}
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style>
    /* Add any specific animations or fine-tuning here if needed */
</style>
